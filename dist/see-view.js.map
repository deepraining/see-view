{"version":3,"file":"see-view.js","sources":["../src/util/logger.js","../src/index.js","../src/bind.js"],"sourcesContent":["const prefix = 'see-fetch: ';\n\nexport const log = (str, ...rest) => {\n  console.log(prefix + str, ...rest);\n};\n\nexport const info = (str, ...rest) => {\n  console.info(prefix + str, ...rest);\n};\n\nexport const warn = (str, ...rest) => {\n  console.warn(prefix + str, ...rest);\n};\n\nexport const error = (str, ...rest) => {\n  console.error(prefix + str, ...rest);\n};\n\nexport const throwError = str => {\n  throw new Error(prefix + str);\n};\n","import { error } from './util/logger';\nimport bind from './bind';\n\nexport default obj => {\n  if (!obj) return;\n\n  const { events } = obj;\n\n  if (!events) {\n    error('missing \"events\" field in imported object.', obj);\n    return;\n  }\n\n  Object.keys(events).forEach(key => {\n    const methodName = events[key];\n\n    if (!methodName) return;\n    if (typeof obj[methodName] !== 'function') {\n      error(`not found \"${methodName}\" method in imported object.`, obj);\n      return;\n    }\n\n    bind(obj, key, methodName);\n  });\n};\n","import jQuery from 'jquery';\nimport { error } from './util/logger';\n\nexport default (obj, key, methodName) => {\n  const noDelegating = key.slice(0, 1) === '!'; // no event delegating\n\n  const realKey = noDelegating ? key.slice(1) : key;\n\n  const keyArray = realKey.split(/\\s+/g);\n\n  if (keyArray.length < 2) {\n    error(`invalid event key: ${key}`);\n    return;\n  }\n\n  const eventName = keyArray.shift();\n\n  const selectors = keyArray.join(' ');\n\n  const method = obj[methodName];\n\n  if (selectors === 'window') {\n    jQuery(window).on(eventName, e => {\n      method.call(obj, e);\n    });\n  } else if (selectors === 'document') {\n    jQuery(document).on(eventName, e => {\n      method.call(obj, e);\n    });\n  } else if (noDelegating) {\n    jQuery(selectors).on(eventName, e => {\n      method.call(obj, e);\n    });\n  } else {\n    jQuery(document).on(eventName, selectors, e => {\n      method.call(obj, e);\n    });\n  }\n};\n"],"names":["error","str","console","rest","obj","events","Object","keys","forEach","key","const","methodName","noDelegating","slice","keyArray","split","length","eventName","shift","selectors","join","method","jQuery","window","on","e","call","document","bind"],"mappings":"6EAcaA,WAASC,iEACpBC,QAAQF,qBAfK,cAeUC,UAAQE,6BCZlBC,GACb,GAAKA,EAAL,CAEQ,eAEHC,EAKLC,OAAOC,KAAKF,GAAQG,iBAAQC,GAC1BC,IAAMC,EAAaN,EAAOI,GAErBE,IAC0B,mBAApBP,EAAIO,YCdHP,EAAKK,EAAKE,GACxBD,IAAME,EAAmC,MAApBH,EAAII,MAAM,EAAG,GAI5BC,GAFUF,EAAeH,EAAII,MAAM,GAAKJ,GAErBM,MAAM,QAE/B,GAAID,EAASE,OAAS,EACpBhB,wBAA4BS,OAD9B,CAKAC,IAAMO,EAAYH,EAASI,QAErBC,EAAYL,EAASM,KAAK,KAE1BC,EAASjB,EAAIO,GAED,WAAdQ,EACFG,EAAOC,QAAQC,GAAGP,WAAWQ,GAC3BJ,EAAOK,KAAKtB,EAAKqB,KAEI,aAAdN,EACTG,EAAOK,UAAUH,GAAGP,WAAWQ,GAC7BJ,EAAOK,KAAKtB,EAAKqB,KAEVb,EACTU,EAAOH,GAAWK,GAAGP,WAAWQ,GAC9BJ,EAAOK,KAAKtB,EAAKqB,KAGnBH,EAAOK,UAAUH,GAAGP,EAAWE,WAAWM,GACxCJ,EAAOK,KAAKtB,EAAKqB,MDbnBG,CAAKxB,EAAKK,EAAKE,GAJbX,gBAAoBW,iCAA0CP,MAThEJ,EAAM,6CAA8CI"}